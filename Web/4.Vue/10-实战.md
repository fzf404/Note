<!-- 
title: 10-Vue实战
sort: 
--> 

```bash
npm install -g vue-cli
vue init webpack demo
yarn add node-sass sass-loader
yarn add sass-loader@^10.1.1
```

## 步骤

1. 编辑页面:  `/src/pages/Home.vue`


```js
<template>
  <div>
    <div class="title">
      <h1>{{ msg }}</h1>
    </div>
  </div>
</template>

<script>
export default {
  name: 'home',
  data () {
    return {
      msg: 'Welcome to Your Vue.js App'
    }
  }
}
</script>
```

2. 配置路由: `/src/router/index.js`

```js
import Vue from 'vue'
import Router from 'vue-router'
import router from "./router";
import store from './store’


Vue.use(Router)

new Vue({
  el: "#app",
  router,
  store,
  components: { App },
  template: "<App/>"
});

```

3. 首页链接: `/src/app.vue`

```vue
<nav>
  <div class="container">
    <ul class="nav_left">
      <li>
        <router-link to="/">Home</router-link>
      </li>
      <li>
        <router-link to="/admin">Admin</router-link>
      </li>
    </ul>
  </div>
</nav>
```

4. 编写组件: `/src/components/xx.vue`

```vue
<script>
export default {
  name: 'product-list',
  // 生命周期
  created () {
    if (this.products.length === 0) {
      // 触发store的action
      this.$store.dispatch('allProducts')
    }
  },
  // 使用store传递参数
  computed: {
    products () {
      // 取state
      // return this.$store.state.products
      // 调用action
     	return this.$store.getters.allProducts
    }
  },
  // 从父组件获得data
  // props: ['model', 'manufacturers', 'isEditing'],
  methods: {
    // 触发父组件方法
    saveProduct () {
      // this.$emit('save-product', this.model)
    },
    // 触发Store的方法
    addToCart (product) {
      this.$store.commit('ADD_TO_CART', {
        product
      })
    }
  }
}
</script>
```

5. 编写Router: `/src/router/index.js`

```js
import Vue from "vue";
import Router from "vue-router";

import Home from "@/pages/Home";
import Cart from "@/pages/Cart";
import Detail from "@/pages/Detail";

Vue.use(Router);

const router = new Router({
  routes: [
    {
      path: "/",
      name: "Home",
      component: Home
    },
    {
      path: "/cart",
      name: "Cart",
      component: Cart
    },
    {
      path: "/detail/:id",
      name: "Detail",
      component: Detail
    }
  ]
});

export default router;

```

6. 编写Store: `/src/store/index.js`

```js
import Vue from 'vue'
import Vuex from 'vuex'
import axios from 'axios'

const API_BASE = 'http://127.0.0.1:3000/api/v1/'

Vue.use(Vuex)

export default new Vuex.Store({
  // 只有mutations能修改state的值
  strict: true,
  // 全部数据
  state: {
		cart: [],
    product: []
  },
  // 修改state值的函数
  mutations: {
    ADD_TO_CART (state, payload) {
      const { product } = payload
      state.cart.push(product)
    },
  },
  // 异步操作
  actions: {
    allProducts ({ commit }) {
      // 调用mutations
      commit('ADD_TO_CART')
			// 发送异步请求
      axios.get(`${API_BASE}/products`).then(response => {
        console.log('response', response)
        // 再次调用mutations
        commit('ADD_TO_CART', {
          products: response.data
        })
      })
    }
  }
})
```

