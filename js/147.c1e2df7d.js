(window.webpackJsonp=window.webpackJsonp||[]).push([[147],{775:function(n,e){n.exports='\x3c!--\ntitle: 12-NodeMCU服务\nsort:\n--\x3e\n\n# Esp8266 网络\n\n## 第一个网络服务器\n\n```c\n#include <ESP8266WiFi.h>\n#include <ESP8266WiFiMulti.h>\n#include <ESP8266WebServer.h>\n\nESP8266WiFiMulti wifiMulti;     // 建立ESP8266WiFiMulti对象\n\nESP8266WebServer esp8266_server(80);// 建立ESP8266WebServer对象，80为端口号\n\nvoid setup(void){\n  Serial.begin(9600);          // 启动串口通讯\n\n  wifiMulti.addAP("fzf", "12345678");\n  // 判断连接\n  int i = 0;\n  while (wifiMulti.run() != WL_CONNECTED) {\n    delay(1000);\n    Serial.print(i++); Serial.print(\' \');\n  }\n  // 输出连接信息\n  Serial.println(\'\\n\');\n  Serial.print("Connected to ");\n  Serial.println(WiFi.SSID());\n  Serial.print("IP address:\\t");\n  Serial.println(WiFi.localIP());\n\n  // 启动服务\n  esp8266_server.begin();\n  esp8266_server.on("/", handleRoot); // 网站路径，处理函数\n  esp8266_server.on("/fzf", handleFzf); // 网站路径，处理函数\n  esp8266_server.onNotFound(handleNotFound);  // 404处理函数\n\n  Serial.println("HTTP esp8266_server started");\n\n}\n\nvoid loop(void){\n  esp8266_server.handleClient();     // 循环处理\n}\n\n\nvoid handleRoot() {\n  // 响应码，信息类型，信息\n  esp8266_server.send(200, "text/plain", "Hello from ESP8266 By FZF");\n}\n\nvoid handleFzf() {\n  // 响应码，信息类型，信息\n  esp8266_server.send(200, "text/plain", "嘿嘿，被你找到了！");\n}\n\nvoid handleNotFound(){\n  esp8266_server.send(404, "text/plain", "404: Not found");\n}\n```\n\n## 操作 LED\n\n```c\n#include <ESP8266WiFi.h>\n#include <ESP8266WiFiMulti.h>\n#include <ESP8266WebServer.h>\n\nESP8266WiFiMulti wifiMulti;\n\nESP8266WebServer esp8266_server(80);\n\nvoid setup(void){\n  Serial.begin(9600);\n\n  pinMode(LED_BUILTIN, OUTPUT); //设置内置LED引脚为输出模式\n\n  wifiMulti.addAP("fzf", "12345678");\n  Serial.println("Connecting ...");\n\n  int i = 0;\n  while (wifiMulti.run() != WL_CONNECTED) {\n    delay(1000);\n    Serial.print(i++); Serial.print(\' \');\n  }\n\n\n  Serial.println(\'\\n\');\n  Serial.print("Connected to ");\n  Serial.println(WiFi.SSID());\n  Serial.print("IP address:\\t");\n  Serial.println(WiFi.localIP());\n\n  esp8266_server.begin();\n  esp8266_server.on("/", HTTP_GET, handleRoot);\n  esp8266_server.on("/LED", HTTP_POST, handleLED);\n  esp8266_server.onNotFound(handleNotFound);\n\n  Serial.println("HTTP esp8266_server started");\n}\n\nvoid loop(void){\n  esp8266_server.handleClient();\n}\n\nvoid handleRoot() {\n  esp8266_server.send(200, "text/html", "<form action=\\"/LED\\" method=\\"POST\\"><input type=\\"submit\\" value=\\"Toggle LED\\" style=\\"background-color: #4CAF50;color: white;\\"></form>");\n}\n\n// 处理LED控制请求\nvoid handleLED() {\n  digitalWrite(LED_BUILTIN,!digitalRead(LED_BUILTIN));\n  esp8266_server.sendHeader("Location","/");\n  esp8266_server.send(303);\n}\n\n\nvoid handleNotFound(){\n  esp8266_server.send(404, "text/plain", "404: Not found");\n}\n```\n\n## 查看开发板信息\n\n```c\n#include <Arduino.h>\n#include <ESP8266WiFi.h>\n#include <ESP8266WiFiMulti.h>\n#include <ESP8266WebServer.h>\n\n#define buttonPin D3\n\nESP8266WiFiMulti wifiMulti;\n\nESP8266WebServer esp8266_server(80);\n\nvoid handleRoot();\nvoid handleNotFound();\n\nbool pinState; // 存储引脚状态用变量\n\nvoid setup()\n{\n    Serial.begin(9600);\n\n    pinMode(buttonPin, INPUT_PULLUP); // 将按键引脚设置为输入上拉模式\n    pinMode(LED_BUILTIN, OUTPUT);\n    digitalWrite(LED_BUILTIN, 1);\n\n    wifiMulti.addAP("Tenda_fzf", "18652798912");\n    Serial.println("Connecting ...");\n\n    int i = 0;\n    while (wifiMulti.run() != WL_CONNECTED)\n    {\n        delay(1000);\n        Serial.print(i++);\n        Serial.print(\' \');\n    }\n\n    Serial.println(\'\\n\');\n    Serial.print("Connected to ");\n    Serial.println(WiFi.SSID());\n    Serial.print("IP address:\\t");\n    Serial.println(WiFi.localIP());\n\n    esp8266_server.begin();\n    esp8266_server.on("/", handleRoot);\n    esp8266_server.onNotFound(handleNotFound);\n\n    Serial.println("HTTP esp8266_server started");\n}\n\nvoid loop()\n{\n    esp8266_server.handleClient();\n    pinState = digitalRead(buttonPin);\n}\n\nvoid handleRoot()\n{\n    String displayPinState;\n\n    if (pinState == HIGH)\n    {\n        displayPinState = "Button State: Up";\n        digitalWrite(LED_BUILTIN, 0);\n    }\n    else\n    {\n        displayPinState = "Button State: Down";\n        digitalWrite(LED_BUILTIN, 1);\n    }\n\n    esp8266_server.send(200, "text/plain", displayPinState);\n}\n\nvoid handleNotFound()\n{\n    esp8266_server.send(404, "text/plain", "404: Not found");\n}\n```\n'}}]);