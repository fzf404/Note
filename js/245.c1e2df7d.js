(window.webpackJsonp=window.webpackJsonp||[]).push([[245],{873:function(n,e){n.exports='\x3c!--\ntitle: Image_Hosting\nsort:\n--\x3e\n\n## 搭建图床\n\n> 限制的阿里云服务器，用来搭一个图床\n\n## Centos7\n\n### 安装 docker\n\n> 详见 docker.md\n>\n> ```bash\n> # 安装容器编排工具compose\n> sudo curl -L "https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose\n> sudo chmod +x /usr/local/bin/docker-compose\n>\n> ```\n>\n> Compose 是用于定义和运行多容器 Docker 应用程序的工具。通过 Compose，您可以使用 YML 文件来配置应用程序需要的所有服务。然后，使用一个命令，就可以从 YML 文件配置中创建并启动所有服务。\n\n### Pull 仓库\n\n```bash\nsudo docker pull mariadb:latest\nsudo docker pull nmtan/chevereto:latest\n```\n\n### 使用``Docker-compose`启动服务\n\n- 新建配置文件\n\n  ```bash\n  mkdir cheverto/\n  cd cheverto\n  touch docker-compose.yaml\n  ```\n\n- 增加内容\n\n  ```yaml\n  version: "3"\n\n  services:\n    db:\n      image: mariadb\n      volumes:\n        - database:/var/lib/mysql:rw\n      restart: always\n      networks:\n        - private\n      environment:\n        MYSQL_ROOT_PASSWORD: chevereto_root\n        MYSQL_DATABASE: chevereto\n        MYSQL_USER: chevereto\n        MYSQL_PASSWORD: chevereto\n\n    chevereto:\n      depends_on:\n        - db\n      image: nmtan/chevereto\n      restart: always\n      networks:\n        - private\n      environment:\n        CHEVERETO_DB_HOST: db\n        CHEVERETO_DB_USERNAME: chevereto\n        CHEVERETO_DB_PASSWORD: chevereto\n        CHEVERETO_DB_NAME: chevereto\n        CHEVERETO_DB_PREFIX: chv_\n      volumes:\n        - chevereto_images:/var/www/html/images:rw\n      ports:\n        - 8888:80\n\n  networks:\n    private:\n  volumes:\n    database:\n    chevereto_images:\n  ```\n\n- 启动服务\n\n  ```python\n  nohup docker-compose up & > run.log &\n  ```\n\n- 问题\n\n  ```bash\n  sudo chmod 666 /var/run/docker.sock\n\n  sudo groupadd docker\n  sudo gpasswd -a ${USER} docker\n  sudo service docker restart\n\n  sudo yum update\t\t# 更新系统后终于解决了qwwq\n  ```\n'}}]);