(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{758:function(n,t){n.exports='\x3c!--\ntitle: 07-常用输入模块\nsort:\n--\x3e\n\n## 旋转编码器\n\n### 接线图\n\n![img](https://www.arduino.cn/data/attachment/forum/201909/18/182520dg1o4aidzyg6dzz1.jpg)\n\n### 实例\n\n```c\nint CLK = 2;\nint DT = 3;\nint SW = 4;\nconst int interrupt0 = 0;\nint count = 0;\nint lastCLK = 0;\n\nvoid setup()\n{\n  pinMode(SW, INPUT);\n  digitalWrite(SW, HIGH);\n  pinMode(CLK, INPUT);\n  pinMode(DT, INPUT);\n  attachInterrupt(interrupt0, ClockChanged, FALLING);\n  // 中断函数\n  Serial.begin(9600);\n}\n\nvoid loop()\n{\n  if (!digitalRead(SW) && count != 0)\n  {\n    count = 0;\n    Serial.print("count:");\n    Serial.println(count);\n  }\n}\n\nvoid ClockChanged()\n{\n\n  int clkValue = digitalRead(CLK);\n  int dtValue = digitalRead(DT);\n  if (lastCLK != clkValue)\n  {\n    lastCLK = clkValue;\n    count += (clkValue != dtValue ? 1 : -1);\n    Serial.print("count:");\n    Serial.println(count);\n  }\n\n}\n```\n'}}]);