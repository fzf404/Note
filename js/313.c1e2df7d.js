(window.webpackJsonp=window.webpackJsonp||[]).push([[313],{941:function(n,e){n.exports="\x3c!--\ntitle: 51-图像分类\nsort:\n--\x3e\n\n# OpenCV 图像分类\n\n## 导入图像\n\n```python\n# 导入opencv-python\nimport cv2\n\n# 读入本地图像文件\nimg = cv2.imread('no_exist.png')\n\n# 校验图像是否导入成功，如果导入失败，就输出提示\nif img is None:\n    print(\"未能读入图像，请检查图像文件路径是否正确\")\n\n# 在窗口中显示图像\ncv2.imshow(\"Display window\", img)\n\n# 获取键盘按键动作，如果按下s键，就将图像保存至本地\nk = cv2.waitKey(0) # 0表示永久等待键盘按键，15表示等待15毫秒\n\nif k == ord(\"s\"):\n    cv2.imwrite(\"saved_img.png\", img)\n\ncv2.destroyAllWindows()\n\n```\n\n## 处理视频\n\n```python\n# 导入opencv-python\nimport cv2\n\n# 传入本地视频\ncap = cv2.VideoCapture('test.mp4')\n\n# 校验本地视频是否捕获成功，如果未成功则输出提示\nif not cap.isOpened():\n    print(\"无法打开视频\")\n    exit()\n\n# 获取视频的宽、高信息，cap.get()传入的参数可以是0-18的整数，也可以设置宽高等信息\nprint('WIDTH',cap.get(3))\nprint('HEIGHT',cap.get(4))\n\n# 无限循环，直到触发break跳出\nwhile True:\n    # 逐帧获取视频画面，返回ret和frame\n    # ret的True/False反映是否捕获成功，frame是画面\n    ret, frame = cap.read()\n\n    # 校验画面帧是否正确捕获，如果未成功则输出提示，跳出循环\n    if not ret:\n        print(\"无法获取画面帧\")\n        break\n\n    # 对画面帧进行处理\n    # 这里是将画面转为灰度图\n    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)\n\n    # 在窗口中显示处理之后的画面\n    cv2.imshow('frame_window', gray)\n\n    # 获取键盘按键动作，如果按下q键，就跳出循环\n    # 25毫秒是恰好的，如果太小，播放速度会很快，如果太大，播放速度会很慢\n    if cv2.waitKey(25) == ord('q'):\n        break\n\n# When everything done, release the capture\ncap.release()\ncv2.destroyAllWindows()\n```\n\n## 保存视频\n\n```python\n# 导入科学计算库numpy\nimport numpy as np\n\n# 导入opencv-python\nimport cv2 as cv\n\n# 获取摄像头\ncap = cv.VideoCapture(0)\n\n# 指定VideoWriter的fourCC视频编码\nfourcc = cv.VideoWriter_fourcc(*'DIVX')\n\n# 指定输出文件、fourCC视频编码、FPS帧率、画面大小\nout = cv.VideoWriter('output.avi', fourcc, 20.0, (640,  480))\n\nwhile cap.isOpened():\n    ret, frame = cap.read()\n    if not ret:\n        print(\"无法打开摄像头\")\n        break\n\n    # 对画面帧进行处理\n    # 这里是将画面翻转\n    frame = cv.flip(frame, 0)\n\n    # 将处理后的画面逐帧保存至output文件中\n    out.write(frame)\n    # 将处理后的画面逐帧显示在窗口中\n    cv.imshow('frame', frame)\n    # 获取键盘按键动作，如果按下q键，就跳出循环\n    if cv.waitKey(1) == ord('q'):\n        break\n\n# 关闭摄像头、视频保存器、窗口\ncap.release()\n# out.release()\ncv.destroyAllWindows()\n\n```\n\n## 总结\n\n### 图片\n\n```python\n# 导入图像\nimg = cv2.imread(path)\n# img is None 判断是否导入成功\n# 显示图像\ncv2.imshow(\"Title\", img)\n# 等待按键，0表示永久\nk = cv2.waitKey(0)\n# 关闭显示窗口\ncv2.destroyAllWindows()\n# 写入图像\ncv2.imwrite(\"Name\", img)\n```\n\n### 摄像头\n\n```python\n# 获取摄像头，0表示编号为1的摄像头\ncap = cv2.VideoCapture(0,cv2.CAP_DSHOW)\n# 打开摄像头\ncap.open(0)\n# 读取,flag为读取成功标记，frame为像素字典\nflag, frame= cap.read()\n'''frame\narray([[[ 3,  3,  3],\n        [ 3,  3,  3],\n        [ 1,  1,  1],\n        ...,\n'''\n# 展示方法与图片一致，延时60ms\ncv2.waitKey(60)\n# 关闭摄像头\ncap.release()\n\n```\n\n### 视频\n\n```python\n# 打开视频\nvid = cv2.VideoCapture(path)\n# 获取视频信息,3为宽，4为高\nvid.get(3)\n# 获取一帧\nret, frame = cap.read()\n# 展示方法与图片一致，延时25ms\ncv2.waitKey(25)\n```\n\n### 保存视频\n\n```python\n# 指定视频编码\nfourcc = cv.VideoWriter_fourcc(*'DIVX')\n# 指定输出文件,文件、编码、帧率、画面大小\nout = cv.VideoWriter('output.avi', fourcc, 10.0 (640,480))\n# 写入\nout.write(frame)\n```\n"}}]);