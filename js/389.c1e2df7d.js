(window.webpackJsonp=window.webpackJsonp||[]).push([[389],{1017:function(e,n){e.exports='\x3c!--\ntitle: Https\nsort:\n--\x3e\n\n## acme.sh\n\n> [复制下载](https://raw.githubusercontent.com/acmesh-official/acme.sh/master/acme.sh)\n\n```bash\ncurl https://get.acme.sh | sh\nalias acme.sh=~/.acme.sh/acme.sh\n\n# 注册\nacme.sh --register-account -m xxx@qq.com\n\n# 验证所有权\nacme.sh --issue -d cloud.fzf404.art --webroot /opt/xxx/\n# 自动nginx验证\nacme.sh --issue -d cloud.fzf404.art --nginx\n\n# 安装证书\nacme.sh --install-cert -d cloud.fzf404.art \\\n--key-file       /www/nginx/key.pem  \\\n--fullchain-file /etc/nginx/cert.pem\n\n# nginx配置文件\n# 注释掉\nlisten 443 ssl default_server;\nlisten [::]:443 ssl default_server;\n\nssl_certificate\t\t\tcert.pem;\nssl_certificate_key key.pem;\n```\n\n## 一键配置脚本\n\n### shell\n\n```bash\n#!/bin/bash\n\ngit clone https://github.com.cnpmjs.org/acmesh-official/acme.sh.git /root/.acme.sh/acme.sh\n\n/root/.acme.sh/acme.sh --register-account -m xxx@163.com\n\nwebList=("xxx.fzf404.art")\n\n# 批量为网站创建SSL证书\nfor item in ${webList[*]}\ndo\n/root/.acme.sh/acme.sh --issue -d $item --nginx\n\nmkdir -p /www/cert/$item\n\n/root/.acme.sh/acme.sh --install-cert -d $item \\\n--key-file       /www/cert/$item/key.pem  \\\n--fullchain-file /www/cert/$item/cert.pem\ndone\n\n# Nginx\nln -s /etc/nginx/sites-available/*.conf /etc/nginx/sites-enabled/\n```\n\n### 配置文件\n\n- 反向代理\n\n```nginx\nserver {\n    listen 80;\n    # listen 443 ssl;\n\n    server_name xxx.fzf404.art;\n\n    # ssl_certificate /www/cert/xxx.fzf404.art/cert.pem;\n    # ssl_certificate_key /www/cert/xxx.fzf404.art/key.pem;\n\n    location / {\n        proxy_pass http://localhost:8080/;\n\n        proxy_set_header Host $host;\n        proxy_set_header Referer $http_referer;\n        proxy_set_header X-Real-Ip $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n        proxy_http_version 1.1;\n\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection upgrade;\n        proxy_set_header Accept-Encoding gzip;\n\n    }\n\n    access_log /www/log/xxx.fzf404.art.log;\n    error_log /www/log/xxx.fzf404.art.error.log;\n}\n```\n'}}]);