(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{707:function(n,e){n.exports='\x3c!--\ntitle: 32-PWA\nsort:\n--\x3e\n\n1. `manifest.json`\n\n    ```json\n    {\n      "name": "PWA-DEMO",\n      "short_name": "PWA",\n      "decription": "fzf404\'s pwa page.",\n      "display": "standalone",\n      "start_url": "/pwa",\n      "theme_color": "#ffffff",\n      "background_color": "#ffffff",\n      "icons": [\n        {\n          "src": "logo.png",\n          "sizes": "256x256",\n          "type": "image/png"\n        }\n      ]\n    }\n\n    ```\n\n2. `index.html`\n\n    ```html\n    <!DOCTYPE html>\n    <html lang="zh-CN">\n      <head>\n        <link rel="manifest" href="manifest.json" />\n      </head>\n    \n      <body>\n        <h2>This is a PWA example ⏱</h2>\n        <script>\n          if (navigator.serviceWorker != null) {\n            navigator.serviceWorker.register(\'sw.js\').then((reg) => {\n              console.log(\'Registered events at scope: \', reg.scope)\n            })\n          }\n        <\/script>\n      </body>\n    </html>\n    \n    ```\n\n    \n\n3. `sw.js`\n\n    ```js\n    console.log(\'1. Service Worker Loading...\')\n    \n    const cacheStorageKey = \'intro-1\'\n    \n    const cacheList = [\'/\', \'index.html\', \'logo.png\']\n    \n    // 安装\n    self.addEventListener(\'install\', (e) => {\n      console.log(\'2. Installing...\')\n      e.waitUntil(\n        caches\n          .open(cacheStorageKey)\n          .then((cache) => {\n            console.log(\'2-1. Adding File to Cache: \', cacheList)\n            return cache.addAll(cacheList)\n          })\n          .then(function () {\n            console.log(\'2-2. Skip Waiting\')\n            return self.skipWaiting()\n          })\n      )\n    })\n    \n    // 更新\n    self.addEventListener(\'activate\', (e) => {\n      console.log(\'3, Activate Running...\')\n      e.waitUntil(\n        caches.keys().then((cacheNames) => {\n          Promise.all(\n            cacheNames\n              .map((name) => {\n                if (name !== cacheStorageKey) {\n                  console.log(`3-1. Removeing: ${caches[name]}`)\n                  return caches.delete(name)\n                }\n              })\n          ).then(() => {\n            console.log(\'3-2. Update Reload\')\n          })\n        })\n      )\n    })\n    \n    // 获取\n    self.addEventListener(\'fetch\', (e) => {\n      console.log(\'4. Fetch:\', e.request.url)\n      e.respondWith(\n        caches.match(e.request).then((res) => {\n          if (res != null) {\n            console.log(\'4-1. Using cache for:\', e.request.url)\n            return res\n          }\n          console.log(\'4-2. Fallback to fetch:\', e.request.url)\n          return fetch(e.request.url)\n        })\n      )\n    })\n    \n    ```\n\n    '}}]);