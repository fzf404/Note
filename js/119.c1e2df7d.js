(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{747:function(n,t){n.exports='\x3c!--\ntitle: 04-串并互转\nsort:\n--\x3e\n\n# 串口与并口相互转换\n\n## 74HC165(并转串)\n\n```c\n#include "reg51.h"\n#include "intrins.h"\n\ntypedef unsigned char u8;\ntypedef unsigned int u16;\n\n#define GPIO_LED P0\n\nsbit IN_PL=P1^6;\nsbit IN_Data=P1^7;\nsbit SCK=P3^6;\n\nu8 Read165()\n{\n\tu8 indata = 0;\n\tu8 i;\n\n\tIN_PL = 0;\n\t_nop_();\n\tIN_PL = 1;\n\t_nop_();\n\tfor(i=0;i<8;i++)\n\t{\n\t\tindata = indata<<1;\n\t\tSCK = 0;\n\t\t_nop_();\n\n\t\tindata |= IN_Data ;\n\t\tSCK = 1;\n\t}\n\treturn indata;\n}\n\n\nvoid main()\n{\n\tu8 value165;\n\tGPIO_LED = 0;\n\twhile(1)\n\t{\n\t\tvalue165=Read165();\n\t\tif(value165!=0xff)\n\t\t{\n\t\t\tGPIO_LED = ~value165;\n\t\t}\n\t}\n}\n```\n\n## 74HC595(串转并)\n\n```c\n#include "reg51.h"\n#include "intrins.h"\n\ntypedef unsigned char u8;\ntypedef unsigned int u16;\n\n#define GPIO_LED P0\n\nsbit SRCLK=P3^6;\nsbit RCLK=P3^5;\nsbit SCK=P3^4;\n\nvoid delay(u16 i)\n{\n\twhile(i--);\n}\n\n\nvoid hc595(u8 dat)\n{\n\tu8 a;\n\tfor(a=0;a<8;a++)\n\t{\n\t\tSCK = dat>>7;\t//右移获取最高位\n\t\tdat<<=1;\t\t//左移删掉以传输的数据\n\n\t\tSRCLK = 0;\n\t\t_nop_();\n\t\t_nop_();\n\t\tSRCLK = 1;\n\t}\n\tRCLK = 0;\n\t_nop_();\n\t_nop_();\n\tRCLK = 1;\n}\n\n\nvoid main()\n{\n\tu8 ledNum;\n\tledNum = 0x01;\n\twhile(1)\n\t{\n\t\thc595(ledNum);\n\t\tledNum = _crol_(ledNum,1);\n\t\tdelay(50000);\n\t}\n}\n```\n'}}]);