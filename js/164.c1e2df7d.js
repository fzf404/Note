(window.webpackJsonp=window.webpackJsonp||[]).push([[164],{792:function(n,_){n.exports="\x3c!--\ntitle: 06-CubeIDE中断\nsort:\n--\x3e\n\n### 配置中断\n\n1. 配置 RCC(时钟)菜单：`HSE -> Crystal/Ceramic Resonator`\n\n   > 高速时钟，选择外部晶振\n\n![image-20210623161806839](https://img-1257284600.cos.ap-beijing.myqcloud.com/2021/image-20210623161806839.png)\n\n2. 配置引脚：\n\n   > `PA10`设置为`GPIO_EXIT10`\n   >\n   > `PC13`设置为`GPIO_Output`\n\n3. 配置 GPIO 菜单：\n\n   > GPIO -> PA10 -> GPIO mode -> Rising edge trigger\n   >\n   > `Rising edge trigger`：上升沿触发\n   >\n   > `Filling edge trigger`：下降沿触发\n\n4. 配置 NVIC(嵌套向量中断控制器)：\n\n   > 将``RCC/EXIT interrupts`使能，并设置优先级为 1(一会儿会用到中断)\n   >\n   > ![image-20210623173131332](https://img-1257284600.cos.ap-beijing.myqcloud.com/2021/image-20210623173131332.png)\n\n### 编写代码\n\n> 编写中断处理函数\n\n- 处理代码位置：`stm32f1xx_it.c`\n\n```c\nvoid EXTI15_10_IRQHandler(void)\n{\n  /* USER CODE BEGIN EXTI15_10_IRQn 0 */\n\n  /* USER CODE END EXTI15_10_IRQn 0 */\n  HAL_GPIO_EXTI_IRQHandler(GPIO_PIN_10);\n  /* USER CODE BEGIN EXTI15_10_IRQn 1 */\n\n  /* USER CODE END EXTI15_10_IRQn 1 */\n}\n\n// 点进去\nvoid HAL_GPIO_EXTI_IRQHandler(uint16_t GPIO_Pin)\n{\n  /* EXTI line interrupt detected */\n  if (__HAL_GPIO_EXTI_GET_IT(GPIO_Pin) != 0x00u)\n  {\n    __HAL_GPIO_EXTI_CLEAR_IT(GPIO_Pin);\n    // 调用位置\n    HAL_GPIO_EXTI_Callback(GPIO_Pin);\n  }\n}\n```\n\n- `mian.c`中编写代码\n\n```c\nvoid HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin)\n{\n  if(GPIO_Pin==GPIO_PIN_10)\n  {\n    HAL_Delay(20);\t/* 延时消抖 */\n    if(HAL_GPIO_ReadPin(GPIOA,GPIO_PIN_10) == 1 )\n    {\n    \tHAL_GPIO_TogglePin(GPIOC, GPIO_PIN_13);\n    }\n    __HAL_GPIO_EXTI_CLEAR_IT(GPIO_PIN_10);\n  }\n}\n```\n"}}]);