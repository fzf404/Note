(window.webpackJsonp=window.webpackJsonp||[]).push([[390],{1018:function(n,e){n.exports='\x3c!--\ntitle: K8S\nsort:\n--\x3e\n\n> [安装脚本](https://github.com/lework/kainstall)\n>\n> [图形化安装](https://github.com/eip-work/kuboard-spray)\n>\n> [参考教程](https://k8s.easydoc.net/)\n\n## 概念\n\n### 物理\n\n- Master\n\n    > 主节点，用于控制平台，可不跑任务，可以开多个主节点来提高集群可用度。\n\n- Worker\n\n    > 工作节点，由主节点管理，可不断加机器扩大集群\n\n<img src="https://d33wubrfki0l68.cloudfront.net/5cb72d407cbe2755e581b6de757e0d81760d5b86/a9df9/docs/tutorials/kubernetes-basics/public/images/module_03_nodes.svg" alt="pod" style="width:30%" />\n\n- Pod\n\n  > 每个Woker可有多个Pod，调度最小单位，可包含多个容器，有自己的虚拟IP。\n\n- deployment\n\n    > 对 Pod 副本数量进行管理\n\n### 组件\n\n- `kube-apiserver`: API 服务器，对外提供 Kubernetes API\n- `etcd`: 键值数据库，保存 Kubernetes 所有集群数据\n- `kube-scheduler`: 调度 Pod 到哪个节点运行\n- `kube-controller`: 集群控制器\n- `cloud-controller`: 与云服务商交互\n\n## 使用\n\n```bash\n# 部署应用\nkubectl apply -f app.yaml\nkubectl create -f app.yaml\n# 删除应用\nkubectl delete -f app.yaml\n# 应用操作\nkubectl rollout restart pod test-pod\nkubectl rollout restart deployment test-k8s\nkubectl rollout pause # 暂停\nkubectl rollout resum # 恢复\n# 查看\nkubectl get pod # 列出 pod\nkubectl get deployment # 列出 deployment\nkubectl get all # 全部\nkubectl describe pod $POD_NAME # 查看详细信息\n# 日志\nkubectl logs # 打印 pod 和其中容器的日志\n# 删除\nkubectl delete pod $POD_NAME\nkubectl delete deployment $DEPLOY_NAME\nkubectl delete all --all # 删除全部\n# 进入容器\nkubectl exec\nkubectl exec -ti $POD_NAME -- bash\n```\n\n- `pod.yaml`\n\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: test-pod\nspec:\n  # 定义容器，可以多个\n  containers:\n    - name: test-k8s # 容器名字\n      image: # 镜像路径\n```\n\n- `deployment.yaml`\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  # 部署名字\n  name: test-k8s\nspec:\n  # 个数\n  replicas: 2\n  # 用来查找关联的 Pod，标签需匹配\n  selector:\n    matchLabels:\n      app: test-k8s\n  # 定义 Pod 相关数据\n  template:\n    metadata:\n      labels:\n        app: test-k8s\n    spec:\n      # 定义容器，可以多个\n      containers:\n      - name: test-k8s # 容器名字\n        image: # 镜像路径\n```\n'}}]);